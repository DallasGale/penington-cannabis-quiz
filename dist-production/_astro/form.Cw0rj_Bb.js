import{j as s}from"./jsx-runtime.D3GSbgeI.js";import{o as A,l as E,e as b,s as C,a as g,b as y,c as S}from"./config.BXJrpnhT.js";import{r as n}from"./index.By4mQp_K.js";import"./index.yBjzXJbu.js";const L=()=>{const[i,a]=n.useState(null),[r,m]=n.useState(""),[l,h]=n.useState(""),[w,c]=n.useState(!1);n.useEffect(()=>A(g,async o=>{if(o){a(o);const f=await o.getIdTokenResult();c(!!f.claims.admin)}else a(null),c(!1)}),[]);const p=async()=>{try{await S(g,r,l),console.log("User signed in successfully")}catch(e){e instanceof Error?console.error("Error signing in:",e.message):console.error("Error signing in:",e)}},[u,x]=n.useState(""),[d,t]=n.useState(""),j=async()=>{try{t("Assigning admin role...");const e=await y({uid:u});t(e.data.message)}catch(e){t(`Error: ${e.message}`),console.error("Error assigning admin role:",e)}};return s.jsx("div",{children:i?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["Welcome, ",i.displayName]}),s.jsx("button",{onClick:E,children:"Logout"}),s.jsx("button",{onClick:()=>b("submissions"),children:"Export CSV"}),s.jsx("h3",{children:"Assign Admin Role"}),s.jsx("input",{type:"text",placeholder:"User UID",value:u,onChange:e=>x(e.target.value)}),s.jsx("button",{onClick:j,children:"Assign Admin Role"}),d&&s.jsx("p",{children:d})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>C(),children:"Sign in with Google"}),s.jsx("h3",{children:"Log in"}),s.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:e=>m(e.target.value)}),s.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:e=>h(e.target.value)}),s.jsx("button",{onClick:p,children:"Login"})]})})};export{L as default};
