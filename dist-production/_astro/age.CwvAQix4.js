import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{M as m,S as d}from"./index.C1z3-udy.js";import{s as i}from"./index.5e987f03.DdCAqHyI.js";import{r as n}from"./index.By4mQp_K.js";import"./index.yBjzXJbu.js";import"./index.KqMXKjf4.js";import"./index.85335ed5.Mz1AKNAk.js";const h="_cookiesModalContent_17o2a_5",k="_message_17o2a_13",x="_display3_17o2a_22",w="_ctaGroup_17o2a_27",C="_smallPrint_17o2a_35",c={cookiesModalContent:h,message:k,display3:x,ctaGroup:w,smallPrint:C},j=({open:t,onClose:a,handleCtaClick:l})=>{const o=n.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cookies-modal-container",ref:o}),e.jsx(m,{open:t,onClose:a,closeOnEsc:!1,closeOnOverlayClick:!1,container:o.current,children:e.jsxs("div",{className:`${i.modalContent} ${c.cookiesModalContent}`,children:[e.jsxs("div",{className:c.message,children:[e.jsx("h2",{className:`display3 color-primary ${c.display3}`,children:"Cookie Settings"}),e.jsx("p",{className:`smallPrint color-primary ${c.smallPrint}`,children:"We use cookies to improve your experience on our site with personalised content."})]}),e.jsxs("div",{className:`${i.ctaGroup} ${c.ctaGroup}`,children:[e.jsx(d,{label:"I'm OK with that",onClick:()=>l("true")}),e.jsx(d,{label:"No thanks",onClick:()=>l("false")})]})]})})]})},y=()=>{const[t,a]=n.useState(()=>typeof window<"u"?localStorage.getItem("ageVerified")==="true":!1);return{isVerified:t,setVerified:()=>{localStorage.setItem("ageVerified","true"),a(!0)}}},I=()=>{const{isVerified:t,setVerified:a}=y(),[l,o]=n.useState(!1),[p,r]=n.useState(!1);console.log({localStorage}),n.useEffect(()=>{setTimeout(()=>{t?(o(!1),localStorage.getItem("cookieAccepted")?(r(!1),console.log("we have storage")):(console.log("we do not  have storage"),r(!0))):(new URLSearchParams(window.location.search).get("restricted")==="true"||!t)&&o(!0)},2250)},[t]);const u=()=>{o(!1),window.location.href="https://www.penington.org.au/"},f=()=>{a(),o(!1);const s=new URL(window.location.href);s.searchParams.delete("restricted"),window.history.replaceState({},"",s),setTimeout(()=>{localStorage.getItem("cookieAccepted")==="true"||r(!0)},800)},g=s=>{localStorage.setItem("cookieAccepted",s),r(!1),window.dispatchEvent(new CustomEvent("cookieAccepted",{detail:{status:s==="true"}}))};return e.jsxs(e.Fragment,{children:[e.jsx(m,{open:l,onClose:()=>o(!1),center:!0,closeOnEsc:!1,closeOnOverlayClick:!1,children:e.jsxs("div",{className:i.modalContent,children:[e.jsx("h2",{className:"display3 color-primary",children:"Are you over 18?"}),e.jsxs("div",{className:`${i.ctaGroup} ${i.ageCtaGroup}`,children:[e.jsx(d,{label:"Yes",onClick:f}),e.jsx(d,{label:"No",onClick:u})]})]})}),e.jsx(j,{open:p&&localStorage.getItem("cookieAccepted")!=="true",onClose:()=>r(!1),handleCtaClick:s=>g(s)})]})};export{I as default};
