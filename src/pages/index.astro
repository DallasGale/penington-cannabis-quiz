---
import Layout from "../components/layout.astro";

// import DynamicHead from "../components/dynamicHead.astro";

// Access the raw request URL
// const requestUrl = Astro.request.url;
// const fullUrl = new URL(requestUrl);
// const rawParams = fullUrl.searchParams;
// const decodedParams = new URLSearchParams(rawParams);
// const hasResults = decodedParams.has('q1');
// const ogImageUrl = hasResults 
//   ? `${fullUrl.origin}/api/og${fullUrl.search}`
//   : `${fullUrl.origin}/default-og.jpg`;

// console.log('=== Server-Side Processing ===');
// console.log('1. Full URL:', fullUrl.toString());
// console.log('2. Search string:', fullUrl.search);
// console.log('3. Raw params:', Object.fromEntries(rawParams.entries()));

// Instead of trying to decode the values (which are already decoded by URLSearchParams),
// just use them as-is for the decodedParams

// console.log('4. Has results:', hasResults);
// console.log('5. Decoded params:', Object.fromEntries(decodedParams.entries()));

// Use the raw search string for the OG image URL to preserve encoding

// console.log('6. OG Image URL:', ogImageUrl);
---
<Layout>
  Page 1
</Layout>

