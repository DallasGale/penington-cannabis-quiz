---
import Layout from "../components/layout.astro";
import Header from "../components/header/index.tsx";
import PrimaryCta from "../components/buttons/primaryCta";
import Clock from "../assets/icons/clock.svg";
import AgeModal from "../components/modals/age";
import Titles from "../components/screens/home/titles";
---

<script>
  // Check localstorage for cookie acceptance

  import { doc } from "firebase/firestore";

  function updateButtonVisibility() {
    // const titles = document.querySelector(".content");
    const getStartedWrapper = document.getElementById("get-started");
    const ageVerified = localStorage.getItem("ageVerified");
    if (ageVerified === "true") {
      getStartedWrapper?.classList.remove("hide");
      getStartedWrapper?.classList.add("show");
      // titles?.classList.add("show");
      // titles?.classList.remove("hide");
    } else {
      getStartedWrapper?.classList.remove("show");
      getStartedWrapper?.classList.add("hide");
      // titles?.classList.add("hide");
      // titles?.classList.remove("show");
    }
  }

  window.addEventListener("cookieAccepted", updateButtonVisibility);
  window.addEventListener("storage", updateButtonVisibility);
  updateButtonVisibility();
</script>

<Layout>
  <Header client:load />
  <div class="content">
    <Titles client:load />
    <div class="hide" id="get-started" style="width: 100%;">
      <PrimaryCta client:load label="Get Started" isLink link="/quiz" />
    </div>
  </div>

  <AgeModal client:only />

  <footer class="footer">
    <small class="smallPrint"
      >All information gathered is anonymous and confidential. This website does
      not promote cannabis use but serves as a public platform for discussion
      and information.</small
    >
  </footer>
</Layout>

<style lang="scss">
  @import "../styles/breakpoints.scss";
  .content {
    align-items: center;
    display: flex;
    gap: 22px;
    flex-direction: column;

    @include respond-to(mobile) {
      gap: 52px;
      max-width: 670px;
    }
  }

  .footer {
    max-width: 670px;
  }

  .hide {
    display: none;
  }
  .show {
    display: flex;
  }

  #get-started {
    max-width: 420px;
    margin: auto;
  }
</style>
